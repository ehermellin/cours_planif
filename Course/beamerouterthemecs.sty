% Name : beamerouterthemecs.sty

%--------------------------------------------------------------
% Mandatory part
%--------------------------------------------------------------
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerouterthemecs}[cs outer theme]

%--------------------------------------------------------------
% First frame
%--------------------------------------------------------------
\defbeamertemplate*{title page}{cs}{
	\nointerlineskip
	\begin{beamercolorbox}[dp=2.3ex, sep=2ex, wd=\paperwidth, ht=\paperheight]{titlepage}
		\vbox to 62ex{
			\hskip275pt \input{images/logo-titre.tikz}
			
			\vspace{4em}
			
			{\bfseries \Large \inserttitle} \\
			\vspace{1em}
			{\large \insertsubtitle}
			\vspace{1.5em}
			
			\textcolor{CS-1}{\rule{0.8\linewidth}{.5pt}}
			
			\vspace{1.5em}
			\insertauthor \\
			\vspace{0.5em}
			\insertdate \\
			\vspace{0.5em}
			\insertinstitute
		}
	\end{beamercolorbox}
	\setbeamertemplate{footline}[page number]{}
}
%--------------------------------------------------------------
% Title frame
%--------------------------------------------------------------
\defbeamertemplate*{headline}{cs}{%
  \leavevmode%
    \begin{beamercolorbox}[ht=2.25em,wd=\paperwidth]{section in head/foot}%
        \vskip4pt \hskip10pt \insertshorttitle \hfill
        \insertsectionnavigationhorizontal{.75\textwidth}{\hskip0pt plus1filll}{}
        \vskip-1.5pt
        \textcolor{CS-1light}{\rule{1.0\linewidth}{.25pt}}
        
        \ifx\insertframesubtitle\@empty%
        \fi
    \end{beamercolorbox}%
}
\setbeamerfont{frametitle}{parent=structure}

\defbeamertemplate*{frametitle}{cs}{
	\nointerlineskip
	\begin{beamercolorbox}[sep=0.15cm,ht=2.0em,wd=\paperwidth,shadow=true]{frametitle}
		\vbox{}\vskip-2ex%
		\hskip10pt\insertframetitle\strut
		\hfill
		%\raisebox{-1.7mm}{\includegraphics[height=3.2ex]{images/logo}}
	\end{beamercolorbox}%
}

%--------------------------------------------------------------
% Footer
%--------------------------------------------------------------
\defbeamertemplate*{footline}{cs}{
	\begin{beamercolorbox}[wd=\paperwidth,ht=2.5ex,dp=1.5ex]{footlinecolor}%
            \hskip10pt \insertshortauthor \hfill \insertframenumber{} / \inserttotalframenumber \hskip10pt \hfill
    \end{beamercolorbox}
}

%--------------------------------------------------------------
% Section page
%--------------------------------------------------------------
\defbeamertemplate*{section page}{cs}{
	\nointerlineskip
	\begin{beamercolorbox}[dp=2.3ex, sep=2ex, wd=\paperwidth, ht=\paperheight]{titlepage}
		\vbox to 35ex{
			\hspace{0.16\linewidth}
			\begin{minipage}[c]{0.6\linewidth}
				{\Large \bfseries \insertsection}

				\begin{tikzpicture}
					\draw[line width=0.5pt, color=CS-1] (0,0) -- (\linewidth,0);
				\end{tikzpicture}
			\end{minipage}
		}
	\end{beamercolorbox}
}

\AtBeginSection{\frame[plain,noframenumbering]{\sectionpage}}

\AtBeginSubsection{
    \begin{frame}
        \tableofcontents[currentsection,currentsubsection]
    \end{frame}
}
